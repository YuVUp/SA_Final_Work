# 13.	Тестовые сценарии
## 13.1.	Критерии приемки и тестовые сценарии для задач в рамках первого релиза

# Тестовые сценарии

## **UC_ViewMenu (Просмотреть меню)**

### **AC 01.01: Отображение главных категорий**

**Given:** Система загружена, меню доступно.
**When:** Посетитель открывает экран меню.
**Then:** Система отображает кнопки или вкладки с названиями основных категорий.

**Кейс 1: Отображение всех основных категорий (Позитивный)**

**Предусловия:**
- Система загружена
- Меню доступно
- Категории настроены в системе: "Все", "Горячее", "Напитки", "Салаты", "Десерт"

**Шаги:**
1. Открыть экран меню

**Ожидаемый результат:**
Шаг 1: Отображаются кнопки всех основных категорий: "Все", "Горячее", "Напитки", "Салаты", "Десерт"

**Кейс 2: Отображение категорий при пустом меню (Негативный)**

**Предусловия:**
- Система загружена
- В меню нет блюд (все категории пустые)

**Шаги:**
1. Открыть экран меню

**Ожидаемый результат:**
Шаг 1: Отображаются кнопки категорий, но при выборе категории показывается сообщение "Нет доступных блюд"

### **AC 01.02: Навигация по категориям**

**Given:** Посетитель находится на экране меню и видит список категорий.
**When:** Он нажимает на конкретную категорию.
**Then:** Система скрывает другие категории и отображает список блюд выбранной категории.

**Кейс 1: Навигация между категориями (Позитивный)**

**Предусловия:**
- Пользователь находится на экране меню
- Отображаются все категории
- В категории "Напитки" есть 3 блюда, в "Горячее" - 5 блюд

**Шаги:**
1. Нажать на категорию "Напитки"
2. Проверить отображение блюд
3. Нажать на категорию "Горячее"
4. Проверить отображение блюд

**Ожидаемый результат:**
Шаг 2: Отображаются только 3 блюда из категории "Напитки"
Шаг 4: Отображаются только 5 блюд из категории "Горячее", блюда из "Напитки" скрыты

### **AC 02.01: Базовая информация на карточке блюда**

**Given:** Посетитель открыл категорию с доступными блюдами.
**When:** Система отображает список блюд.
**Then:** Каждая карточка блюда содержит изображение, название, описание и цену.

**Кейс 1: Отображение полной информации о блюде (Позитивный)**

**Предусловия:**
- Открыта категория "Горячее"
- В категории есть блюдо "Чизбургер" с изображением, описанием "Мясная котлета с сыром" и ценой 250 ₽

**Шаги:**
1. Найти карточку "Чизбургер" в списке

**Ожидаемый результат:**
Шаг 1: Карточка содержит:
- Четкое изображение чизбургера
- Название "Чизбургер"
- Описание "Мясная котлета с сыром"
- Цену "250 ₽"

### **AC 02.02: Корректное отображение контента**

**Given:** В системе есть блюдо без изображения.
**When:** Это блюдо отображается в меню.
**Then:** Система показывает стандартную картинку-заглушку.

**Кейс 1: Отображение блюда без изображения (Позитивный)**

**Предусловия:**
- В системе есть блюдо "Сырный суп" без загруженного изображения
- Открыта категория "Горячее"

**Шаги:**
1. Найти карточку "Сырный суп" в списке

**Ожидаемый результат:**
Шаг 1: Карточка содержит:
- Стандартную картинку-заглушку
- Название "Сырный суп"
- Описание и цену, отображаемые корректно

---

## **UC_AddToCart (Добавить позиции в корзину)**

### **AC 03.01: Добавление единицы товара**

**Given:** Посетитель просматривает карточку доступного блюда.
**When:** Он нажимает кнопку "Добавить".
**Then:** Система добавляет 1 единицу блюда в корзину, счетчик увеличивается на 1.

**Кейс 1: Добавление первого товара в корзину (Позитивный)**

**Предусловия:**
- Корзина пуста
- Счетчик в шапке не отображается
- Открыта карточка блюда "Чизбургер"

**Шаги:**
1. Нажать кнопку "Добавить" на карточке "Чизбургер"

**Ожидаемый результат:**
- В корзину добавлен 1 чизбургер
- Счетчик в шапке показывает "1"
- Кнопка "Добавить" временно становится неактивной или меняет вид

### **AC 03.02: Визуальное подтверждение добавления**

**Given:** Посетитель нажимает кнопку "Добавить".
**When:** Кнопка нажата.
**Then:** Появляется анимация или текст "Добавлено".

**Кейс 1: Визуальная обратная связь при добавлении (Позитивный)**

**Предусловия:**
- Корзина пуста
- Открыта карточка блюда "Кола"

**Шаги:**
1. Нажать кнопку "Добавить" на карточке "Кола"

**Ожидаемый результат:**
- Рядом с кнопкой появляется текст "Добавлено" или анимация подтверждения
- Через 2-3 секунды индикация исчезает
- Счетчик в шапке обновляется

### **AC 03.03: Повторное добавление одного блюда**

**Given:** Блюдо уже находится в корзине.
**When:** Посетитель снова нажимает кнопку "Добавить".
**Then:** Система увеличивает количество существующей позиции.

**Кейс 1: Увеличение количества существующего товара (Позитивный)**

**Предусловия:**
- В корзине уже есть "Чизбургер" ×1
- Счетчик показывает "1"
- Открыта карточка "Чизбургер"

**Шаги:**
1. Нажать кнопку "Добавить" на карточке "Чизбургер"
2. Открыть корзину для проверки

**Ожидаемый результат:**
Шаг 1: Счетчик увеличивается до "2"
Шаг 2: В корзине отображается "Чизбургер" ×2 (без дубликатов)

### **AC 04.01: Просмотр состава заказа**

**Given:** Посетитель перешел на экран "Проверка заказа".
**When:** Экран загружается.
**Then:** Система отображает список всех добавленных позиций.

**Кейс 1: Отображение полного состава заказа (Позитивный)**

**Предусловия:**
- В корзине добавлены: "Чизбургер" ×2, "Кола" ×1, "Картофель фри" ×1

**Шаги:**
1. Перейти на экран "Проверка заказа"

**Ожидаемый результат:**
- Отображаются все 3 позиции
- Для каждой указано: название, количество, цена за единицу
- Отображается общая сумма заказа

### **AC 04.02: Изменение количества в списке**

**Given:** Посетитель находится на экране "Проверка заказа".
**When:** Он изменяет количество конкретной позиции.
**Then:** Количество, стоимость и общая сумма немедленно пересчитываются.

**Кейс 1: Изменение количества товара с пересчетом сумм (Позитивный)**

**Предусловия:**
- На экране "Проверка заказа" отображается "Чизбургер" ×2 (250 ₽/шт)
- Общая сумма: 500 ₽

**Шаги:**
1. Нажать "+" у "Чизбургер" (увеличить до 3)
2. Проверить отображение сумм

**Ожидаемый результат:**
Шаг 2: 
- Количество: 3
- Стоимость позиции: 750 ₽
- Общая сумма: 750 ₽

### **AC 04.03: Удаление позиции из состава заказа**

**Given:** Посетитель находится на экране "Проверка заказа".
**When:** Он нажимает кнопку "Удалить" для позиции.
**Then:** Позиция удаляется из списка, сумма пересчитывается.

**Кейс 1: Удаление товара из корзины (Позитивный)**

**Предусловия:**
- На экране "Проверка заказа" отображается: "Чизбургер" ×2 (500 ₽), "Кола" ×1 (100 ₽)
- Общая сумма: 600 ₽

**Шаги:**
1. Нажать "Удалить" у позиции "Кола"
2. Проверить обновленный список и сумму

**Ожидаемый результат:**
Шаг 2:
- Позиция "Кола" удалена из списка
- Отображается только "Чизбургер" ×2
- Общая сумма: 500 ₽

### **AC 05.01: Отображение суммы в корзине**

**Given:** Посетитель открыл экран корзины, и в ней есть товары.
**When:** Страница корзины загружена.
**Then:** В нижней части отображается итоговая сумма.

**Кейс 1: Расчет итога для нескольких товаров (Позитивный)**

**Предусловия:**
- В корзине добавлено 3 товара:
  - Товар A: Цена = 100 ₽, Количество = 2
  - Товар B: Цена = 50 ₽, Количество = 1
  - Товар C: Цена = 200 ₽, Количество = 3

**Шаги:**
1. Перейти на страницу корзины

**Ожидаемый результат:**
Шаг 1: На странице отображается итоговая сумма: 850 ₽

**Кейс 2: Расчет итога с товаром нулевой стоимости**

**Предусловия:**
- В корзине добавлено 2 товара:
  - Товар A: Цена = 0 ₽, Количество = 1 (акционный товар)
  - Товар B: Цена = 150 ₽, Количество = 1

**Шаги:**
1. Перейти на страницу корзины

**Ожидаемый результат:**
Шаг 1: На странице отображается итоговая сумма: 150 ₽

### **AC 05.02: Индикатор суммы в шапке**

**Given:** Посетитель находится на любом экране киоска.
**When:** В корзину добавлен товар.
**Then:** В шапке отображается общая сумма заказа.

**Кейс 1: Отображение суммы в шапке на разных экранах (Позитивный)**

**Предусловия:**
- В корзине товары на сумму 350 ₽

**Шаги:**
1. Находиться на экране меню - проверить шапку
2. Перейти на экран "Акции" - проверить шапку

**Ожидаемый результат:**
На всех экранах в шапке отображается сумма "350 ₽"

### **AC 05.03: Отображение детализации суммы**

**Given:** Посетитель перешел на экран "Проверка заказа".
**When:** Экран загружен.
**Then:** Отображаются "Промежуточный итог" и "Итого".

**Кейс 1: Детализация суммы на экране проверки заказа (Позитивный)**

**Предусловия:**
- В корзине: "Чизбургер" ×2 (500 ₽), "Кола" ×1 (100 ₽)
- Общая сумма: 600 ₽

**Шаги:**
1. Перейти на экран "Проверка заказа"

**Ожидаемый результат:**
Отображается:
- Промежуточный итог: 600 ₽
- Итого к оплате: 600 ₽

---

## **Защита от повторных списаний**

**Given:** Покупатель нажал кнопку "Оплатить" только один раз, но произошел сбой сети или интерфейса.
**When:** Он обновляет страницу или возвращается назад.
**Then:** Система проверяет статус заказа и не инициирует повторное списание.

**Кейс 1: Повторный запрос после успешной оплаты (Позитивный)**

**Предусловия:**
- Пользователь имеет заказ в статусе "Оплачен"
- Оплата уже прошла успешно, но клиент не получил подтверждение из-за сбоя сети

**Шаги:**
1. Пользователь обновляет страницу (F5)
2. Система автоматически проверяет статус заказа

**Ожидаемый результат:**
- Система НЕ инициирует новый платеж
- Пользователь видит сообщение: "Заказ №123 уже оплачен 10.05.2024 в 15:30"
- Сумма со счета не списывается повторно

**Кейс 2: Повторный запрос после неудачной оплаты (Негативный)**

**Предусловия:**
- Пользователь имеет заказ в статусе "Ожидает оплаты"
- Предыдущая попытка оплаты завершилась ошибкой "Недостаточно средств"

**Шаги:**
1. Пользователь обновляет страницу (F5)
2. Система автоматически проверяет статус заказа

**Ожидаемый результат:**
- Система НЕ инициирует новый платеж автоматически
- Пользователь видит сообщение о неудачной предыдущей попытке
- Средства со счета не списываются

**Кейс 3: Повторный запрос во время обработки платежа (Негативный)**

**Предусловия:**
- Пользователь имеет заказ в статусе "Оплачивается"
- Платеж находится в состоянии "Обрабатывается" на стороне платежного шлюза

**Шаги:**
1. Не дожидаясь ответа, пользователь обновляет страницу (F5)
2. Система автоматически проверяет статус заказа

**Ожидаемый результат:**
- Система НЕ инициирует новый платеж
- Система отображает статус "Платеж обрабатывается, пожалуйста, подождите"
- Счет пользователя не списывается повторно

---

## **UC_MakePayment (Произвести оплату)**

### **AC 06.01: Предоставление выбора способа оплаты**
**Given:** Посетитель перешел на экран "Оплата".
**When:** Экран загружается.
**Then:** Система отображает доступные способы оплаты в виде четких блоков с иконками и текстом.

**Кейс 1: Отображение способов оплаты с иконками (Позитивный)**

**Предусловия:**
- Пользователь перешел на экран "Оплата"
- Доступны способы: "Банковская карта", "Наличными"

**Шаги:**
1. Дождаться загрузки экрана "Оплата"

**Ожидаемый результат:**
- Отображаются блоки с способами оплаты
- Каждый блок содержит иконку и текст
- Блок "Банковская карта" имеет соответствующую иконку
- Блок "Наличными" имеет соответствующую иконку

### **AC 06.02: Выбор безналичной оплаты**
**Given:** Посетитель находится на экране "Оплата".
**When:** Он нажимает на блок "Банковская карта".
**Then:** Система переходит к процессу оплаты картой.

**Кейс 1: Переход к оплате картой (Позитивный)**

**Предусловия:**
- Пользователь на экране "Оплата"
- Отображаются способы оплаты

**Шаги:**
1. Нажать на блок "Банковская карта"

**Ожидаемый результат:**
- Система переходит на экран оплаты картой
- Отображаются поля для ввода данных карты или запускается NFC-модуль

### **AC 07.01: Ввод данных карты**
**Given:** Посетитель выбрал оплату банковской картой.
**When:** Система отображает форму для ввода данных.
**Then:** Форма содержит поля "Номер карты", "Срок действия", "CVV".

**Кейс 1: Отображение формы оплаты картой (Позитивный)**

**Предусловия:**
- Пользователь выбрал оплату картой
- Открыт экран ввода данных

**Шаги:**
1. Проверить наличие полей формы

**Ожидаемый результат:**
- Присутствует поле "Номер карты" с форматированием по 4 цифры
- Присутствует поле "Срок действия" в формате ММ/ГГ
- Присутствует поле "CVV"
- Все поля доступны для ввода

### **AC 07.02: Валидация данных карты**
**Given:** Посетитель вводит данные в форму оплаты картой.
**When:** Он вводит неверный номер карты.
**Then:** Поле с ошибкой подсвечивается с пояснением.

**Кейс 1: Валидация неверного номера карты (Негативный)**

**Предусловия:**
- Открыта форма оплаты картой
- Все поля пустые

**Шаги:**
1. Ввести неполный номер карты "4111 1111 1111"
2. Перейти к следующему полю

**Ожидаемый результат:**
- Поле "Номер карты" подсвечивается красным
- Под полем отображается текст "Неверный номер карты"
- Кнопка оплаты неактивна

### **AC 08.01: Выбор оплаты наличными**
**Given:** Посетитель находится на экране "Оплата".
**When:** Он нажимает на блок "Наличными при получении".
**Then:** Система показывает подтверждение и кнопку "Подтвердить заказ".

**Кейс 1: Подтверждение оплаты наличными (Позитивный)**

**Предусловия:**
- Пользователь на экране "Оплата"
- Отображаются способы оплаты

**Шаги:**
1. Нажать на блок "Наличными при получении"

**Ожидаемый результат:**
- Отображается сообщение: "Заказ будет передан на кухню. Оплатите наличными при получении у стойки выдачи."
- Отображается кнопка "Подтвердить заказ"
- Кнопка активна и доступна для нажатия

---

## **UC_GetReceipt (Получить талон с номером)**

### **AC 09.01: Печать чека**
**Given:** Оплата заказа прошла успешно.
**When:** Система обработала подтверждение оплаты.
**Then:** Система автоматически отправляет команду на печать чека.

**Кейс 1: Автоматическая печать чека после оплаты (Позитивный)**

**Предусловия:**
- Оплата заказа прошла успешно
- Принтер чеков подключен и готов
- Заказ №R-257

**Шаги:**
1. Завершить процесс успешной оплаты
2. Проверить отправку команды на печать

**Ожидаемый результат:**
- Система автоматически отправляет команду на печать
- Принтер получает команду печати
- Чек начинает печататься

### **AC 09.02: Содержимое чека**
**Given:** Чек отправлен на печать.
**When:** Чек распечатан.
**Then:** На чеке указан номер заказа, список позиций, итоговая сумма, дата и время.

**Кейс 1: Проверка содержимого чека (Позитивный)**

**Предусловия:**
- Чек отправлен на печать для заказа №R-257
- В заказе: "Чизбургер" ×2 (500 ₽), "Кола" ×1 (100 ₽)
- Общая сумма: 600 ₽

**Шаги:**
1. Получить распечатанный чек
2. Проверить содержимое

**Ожидаемый результат:**
Чек содержит:
- Номер заказа: #R-257
- Список позиций: Чизбургер ×2, Кола ×1
- Итоговую сумму: 600 ₽
- Текущую дату и время
- Название заведения

### **AC 10.01: Отображение номера заказа**
**Given:** Оплата прошла успешно.
**When:** Система переходит на экран "Заказ принят".
**Then:** На экране крупным шрифтом отображается номер заказа и статус.

**Кейс 1: Отображение номера заказа после оплаты (Позитивный)**

**Предусловия:**
- Оплата заказа №R-257 прошла успешно
- Система переходит на финальный экран

**Шаги:**
1. Дождаться перехода на экран "Заказ принят"

**Ожидаемый результат:**
- Крупным шрифтом отображается: "Ваш номер заказа #R-257"
- Отображается статус: "Готовится"
- Номер хорошо читаем и выделен

### **AC 10.02: Информация для посетителя**
**Given:** Посетитель находится на экране "Заказ принят".
**When:** Он просматривает экран.
**Then:** На экране присутствует сообщение и кнопка "Вернуться в меню".

**Кейс 1: Отображение информации для ожидания (Позитивный)**

**Предусловия:**
- Пользователь на экране "Заказ принят"
- Отображается номер заказа

**Шаги:**
1. Просмотреть весь экран

**Ожидаемый результат:**
- Присутствует сообщение: "Ожидайте уведомления о готовности"
- Отображается кнопка "Вернуться в меню"
- Кнопка активна и кликабельна

---

## **US-11: Передача заказа на производство**

### **AC 11.01: Передача заказа на производство**
**Given:** Статус заказа изменился на "Оплачен".
**When:** Фиксируется успешная оплата.
**Then:** Система немедленно передает полные данные заказа на кухню.

**Кейс 1: Автоматическая передача заказа на кухню (Позитивный)**

**Предусловия:**
- Заказ №R-257 перешел в статус "Оплачен"
- Система производства онлайн

**Шаги:**
1. Зафиксировать успешную оплату
2. Проверить передачу данных

**Ожидаемый результат:**
- Данные заказа немедленно передаются в систему управления производством
- Передаются все данные: состав, особенности, время заказа
- Система производства подтверждает получение

### **AC 11.02: Смена статуса**
**Given:** Заказ передан на кухню.
**When:** Система производства подтверждает получение.
**Then:** Статус заказа меняется на "Готовится".

**Кейс 1: Смена статуса после принятия кухней (Позитивный)**

**Предусловия:**
- Заказ №R-257 передан на кухню
- Ожидается подтверждение от системы производства

**Шаги:**
1. Дождаться подтверждения от системы производства
2. Проверить статус заказа в интерфейсе

**Ожидаемый результат:**
- Статус заказа меняется с "Оплачен" на "Готовится"
- Изменение статуса отображается в реальном времени
- На экране "Заказ принят" обновляется статус

Рекомендую дополнить тестовые сценарии для полного покрытия всех критериев приемки.

## **Чек-лист приемки**

- [ ] Отображаются ли категории ("Все", "Горячее", "Салаты", "Напитки")?
- [ ] Работает ли иконка корзины в header и отображается ли счетчик товаров?
- [ ] Уменьшается ли счетчик в хедере при удалении товара из корзины?
- [ ] Исчезает ли счетчик, если корзина пуста?
- [ ] Что происходит, если во время оплаты пропадает сеть?
- [ ] Корректно ли отображаются все изображения блюд?
- [ ] Соответствуют ли изображения блюд их названиям?
- [ ] Проходит ли успешная оплата заказа банковской картой?